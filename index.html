<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Punição Serviços</title>
  <link rel="icon" href="https://i.postimg.cc/MG7qzW4x/emote.png" type="image/x-icon">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #121212;
      color: #ffffff;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .container {
      width: 100%;
      max-width: 600px;
      padding: 20px;
    }

    header {
      text-align: center;
      margin-bottom: 20px;
    }

    header p {
      font-size: 16px;
      margin: 10px 0;
    }

    header a {
      color: #4fc3f7;
      text-decoration: underline;
    }

    h1 {
      font-size: 28px;
      margin-bottom: 20px;
      text-align: center;
      color: #90caf9;
    }

    label {
      margin: 8px 0 4px;
      font-weight: bold;
    }

    input, select, textarea, button {
      width: 100%;
      padding: 10px;
      margin-bottom: 16px;
      border: 1px solid #333;
      border-radius: 6px;
      background-color: #1e1e1e;
      color: #fff;
      font-size: 14px;
    }

    button {
      background-color: #3f51b5;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #303f9f;
    }

    textarea {
      resize: none;
      height: 300px;
    }

    .hidden {
      display: none;
    }

    .inline-group {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .footer {
      text-align: center;
      margin: 30px 0 10px;
      font-size: 14px;
      color: #aaa;
    }

    .footer a {
      color: #4fc3f7;
      text-decoration: none;
    }

    .footer img {
      margin-top: 10px;
    }

    @media (max-width: 600px) {
      .inline-group {
        flex-direction: column;
        align-items: flex-start;
      }
    }
  </style>
</head>
<body>
  <header>
    <p>Ainda em testes, preste atenção nas informações geradas. Caso encontre erro, reporte e use o antigo: <a href="https://jackymayers.github.io/punirel/" target="_blank">Clique aqui!</a></p>
  </header>

  <div class="container">
    <h1>Punições serviços XP</h1>

    <label for="id">ID</label>
    <input type="text" id="id" placeholder="ID" />

    <label for="idDiscord">ID Discord</label>
    <input type="text" id="idDiscord" placeholder="ID Discord" />

    <label for="profissao">Profissão</label>
    <select id="profissao" onchange="mostrarOpcoesAdicionais()">
      <option value="Faxineiro">Faxineiro</option>
      <option value="Lenhador">Lenhador</option>
      <option value="Minerador">Minerador</option>
      <option value="Motoboy">Motoboy</option>
      <option value="Lixeiro">Lixeiro</option>
      <option value="Caçador">Caçador</option>
    </select>

    <div id="opcoesLixeiro" class="hidden">
      <label for="opcaoLixeiro">Tipo de advertência</label>
      <select id="opcaoLixeiro" onchange="atualizarAdvertencia()">
        <option value="Roupa">Roupa</option>
        <option value="Veiculo">Veículo</option>
        <option value="RoupaVeiculo">Roupa e Veículo</option>
      </select>
    </div>

    <div id="opcoesCacador" class="hidden">
      <label for="opcaoCacador">Tipo de advertência</label>
      <select id="opcaoCacador" onchange="atualizarAdvertencia()">
        <option value="Roupa">Roupa</option>
        <option value="Arma">Arma</option>
        <option value="RoupaArma">Roupa e Arma</option>
      </select>
    </div>

    <label for="tipoAdvertencia">Tipo de Advertência</label>
    <select id="tipoAdvertencia" onchange="mostrarCamposTipo2(); atualizarAdvertencia();">
      <option value="1">Advertência 1</option>
      <option value="2">Advertência 2</option>
    </select>

    <div id="dadosAdvertencia2" class="hidden">
      <div class="inline-group">
        <label for="tratamento">"O" ou "A"</label>
        <select id="tratamento" onchange="atualizarAdvertencia()">
          <option value="o">O</option>
          <option value="a">A</option>
        </select>

        <label for="nomeStaff">Staff</label>
        <input type="text" id="nomeStaff" placeholder="Nome da Staff" />
      </div>

      <label for="data1">Data 1</label>
      <input type="text" id="data1" placeholder="ex: 0705 ou 07/05" />

      <label for="data2">Data 2</label>
      <input type="text" id="data2" placeholder="ex: 0805 ou 08/05" />
    </div>

    <button onclick="gerarRelatorio()">Gerar Relatório</button>

    <label for="relatorio">Relatório</label>
    <textarea id="relatorio" readonly></textarea>
  </div>

  <div class="footer">
    <img src="https://i.postimg.cc/WzSNyqxY/Jacky-Confuso.png" alt="Jacky Confuso" width="100" />
    <p>© 2025 - Feito com ❤, ajuda de IA e um pouquinho de preguiça por <a href="https://jackymayers.github.io/" target="_blank">Jacky Mayers</a>!</p>
  </div>

  <script>
    function mostrarOpcoesAdicionais() {
      const prof = document.getElementById('profissao').value;
      document.getElementById('opcoesLixeiro').classList.toggle('hidden', prof !== 'Lixeiro');
      document.getElementById('opcoesCacador').classList.toggle('hidden', prof !== 'Caçador');
      atualizarAdvertencia();
    }

    function mostrarCamposTipo2() {
      const tipo = document.getElementById('tipoAdvertencia').value;
      document.getElementById('dadosAdvertencia2').classList.toggle('hidden', tipo !== '2');
    }

    function atualizarAdvertencia() {
      const prof = document.getElementById('profissao').value;
      let motivo = 'Roupa inadequada';
      if (prof === 'Lixeiro') {
        const op = document.getElementById('opcaoLixeiro').value;
        if (op === 'Veiculo') motivo = 'Veículo inadequado';
        else if (op === 'RoupaVeiculo') motivo = 'Roupa e veículo inadequados';
      }
      if (prof === 'Caçador') {
        const op = document.getElementById('opcaoCacador').value;
        if (op === 'Arma') motivo = 'Arma inadequada';
        else if (op === 'RoupaArma') motivo = 'Roupa e arma inadequadas';
      }
      document.getElementById('relatorio').setAttribute('data-motivoResumo', motivo);
    }

    function gerarRelatorio() {
      const id = document.getElementById('id').value;
      const discord = document.getElementById('idDiscord').value;
      const prof = document.getElementById('profissao').value;
      const tipo = document.getElementById('tipoAdvertencia').value;
      const motivo = document.getElementById('relatorio').getAttribute('data-motivoResumo') || 'Roupa inadequada';

      const nomeStaff = document.getElementById('nomeStaff').value;
      const tratamento = document.getElementById('tratamento').value;
      const data1Input = document.getElementById('data1').value;
      const data2Input = document.getElementById('data2').value;

      const detalhes = {
        Faxineiro: '(Faxineiro: calça, sapatos, camiseta e cinto com ferramentas).',
        Lenhador: '(Lenhador: luvas, sapatos, camiseta e calça).',
        Minerador: '(Minerador: luvas, colete refletor, capacete, calças e camiseta).',
        Motoboy: '(Motoboy: colete refletor, mochila e capacete).',
        Lixeiro: {
          Roupa: '(Lixeiro: sapato, luvas, colete refletor, camiseta e calça).',
          Veiculo: '(Lixeiro: caminhão trash).',
          RoupaVeiculo: '(Lixeiro: sapato, luvas, colete refletor, camiseta, calça e caminhão trash).'
        },
        Caçador: {
          Roupa: '(Caçador: roupas fechadas, luvas e sapatos).',
          Arma: '(Caçador: rifle de caça).',
          RoupaArma: '(Caçador: roupas fechadas, luvas, sapatos e rifle de caça).'
        }
      };

      let detalhe = detalhes[prof];
      if (typeof detalhe === 'object') {
        detalhe = detalhe[prof === 'Lixeiro' ? document.getElementById('opcaoLixeiro').value : document.getElementById('opcaoCacador').value];
      }

      let relatorio = `ID: ${id}\nID Discord: ${discord} | <@${discord}>\nProfissão: ${prof}\nMotivo da Advertência: ${motivo} para realizar o trabalho de ${prof.toLowerCase()}\nStatus: Advertência\nProvas:\n\n`;

      if (tipo === '1') {
        relatorio += `Boa tarde. Estamos registrando uma advertência pelo uso inadequado do uniforme de trabalho. Lembre-se de que é essencial utilizar a vestimenta correta para o serviço que está sendo realizado. Em caso de reincidência, uma punição entrará em vigor. ${detalhe}`;
      } else {
        const dataTexto = montarTextoData(data1Input, data2Input);
        relatorio += `Boa Tarde, você está sendo convidad${tratamento} a participar de uma reunião com a Equipe de Suporte. Procure ${tratamento} ${nomeStaff}, para agendar um horário no PRIVADO, ${dataTexto}. Motivo: ${motivo} para realizar o trabalho de ${prof.toLowerCase()}`;
      }

      document.getElementById('relatorio').value = relatorio;
    }

    function normalizarDataBr(str) {
      const soNumeros = str.replace(/[^\d]/g, '');
      const hoje = new Date();
      const anoAtual = hoje.getFullYear();

      if (soNumeros.length === 4) {
        return new Date(`${anoAtual}-${soNumeros.slice(2, 4)}-${soNumeros.slice(0, 2)}T00:00:00`);
      }
      if (soNumeros.length === 8) {
        return new Date(`${soNumeros.slice(4, 8)}-${soNumeros.slice(2, 4)}-${soNumeros.slice(0, 2)}T00:00:00`);
      }
      return null;
    }

    function montarTextoData(d1, d2) {
      const hoje = new Date();
      const amanha = new Date();
      amanha.setDate(hoje.getDate() + 1);

      const data1 = normalizarDataBr(d1);
      const data2 = normalizarDataBr(d2);

      const f1 = data1?.toLocaleDateString('pt-BR');
      const f2 = data2?.toLocaleDateString('pt-BR');

      if (!data1 || isNaN(data1)) return 'data inválida';

      let texto = '';
      const hojeF = hoje.toLocaleDateString('pt-BR');
      const amanhaF = amanha.toLocaleDateString('pt-BR');

      if (f1 === hojeF) texto += `na data de hoje (${f1})`;
      else if (f1 === amanhaF) texto += `na data de amanhã (${f1})`;
      else texto += `na data de (${f1})`;

      if (data2 && !isNaN(data2)) {
        if (f2 === amanhaF) texto += ` ou amanhã (${f2})`;
        else texto += ` ou (${f2})`;
      }

      return texto;
    }
  </script>
</body>
</html>
